<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Event Flow</title>
        <script>
            ////////// ë¡œë“œêµ¬ì—­ ////////////////////////////
            const qs = (x) => document.querySelector(x);
            const qsa = (x) => document.querySelectorAll(x);

            window.addEventListener("DOMContentLoaded", () => {
                console.log("ë¡œë”©ì™„ë£Œ!");

                // íƒ€ê²Ÿ ë¡œê·¸ì°ê¸°
                const showLog = x => console.log(x,":",
                    "\n cTg:",event.currentTarget,
                    "\n tg:",event.target,
                    "\n cancelable:",event.cancelable,
                    "\n bubbles:",event.bubbles,
                    "\n type:",event.type,
                    "\n view:",event.view,
                    "\n eventPhase:",event.eventPhase,
                    "\n isTrusted:",event.isTrusted,
                    );

                    // ëŒ€í•œë¯¼êµ­ì „ì²´ ////////////////////////
                    qs("body").onclick = (e) => {
                        // currentTarget ì´ë²¤íŠ¸ë¥¼ ë°›ê³  ìˆëŠ” ìš”ì†Œ ìì‹ 
                        event.currentTarget.style.backgroundColor = "blue";
                        // event.target.style.backgroundColor = "blue";

                        // ì´ë²¤íŠ¸ ì†ì„±ê°’ ì°ê¸°
                        showLog("ëŒ€í•œë¯¼êµ­ì „ì²´");

                    }; ////////////////// click ///////////////


                    // ì¹œì²™ë„¤ì§‘ /////////////
                    qs("div").onclick = (e) => {
                        // currentTarget ì´ë²¤íŠ¸ë¥¼ ë°›ê³  ìˆëŠ” ìš”ì†Œ ìì‹ 
                        event.currentTarget.style.backgroundColor = "green";
                        // event.target.style.backgroundColor = "green";

                        // ì´ë²¤íŠ¸ ì†ì„±ê°’ ì°ê¸°
                        showLog("ì¹œì²™ë„¤ì§‘");

                    }; ////////////////// click ///////////////


                    // ì—„ë§ˆì§‘ /////////////
                    qs("p").onclick = (e) => {
                        // currentTarget ì´ë²¤íŠ¸ë¥¼ ë°›ê³  ìˆëŠ” ìš”ì†Œ ìì‹ 
                        event.currentTarget.style.backgroundColor = "yellow";
                        // event.target.style.backgroundColor = "yellow";

                        // ì´ë²¤íŠ¸ ë²„ë¸”ë§ë§Œ ë§‰ê¸°
                        // event.stopPropagation();

                        // ì´ë²¤íŠ¸ ë²„ë¸”ë§ê³¼ ê°™ì€ ì´ë²¤íŠ¸ì— ê¸°ëŠ¥ ì„¤ì •ëœ ê²ƒê¹Œì§€ ëª¨ë‘ ë§‰ê¸°
                        event.stopImmediatePropagation();
                        // ì´ê²ƒì´ ì„¤ì •ëœ í•¨ìˆ˜ì˜ ê¸°ëŠ¥ì€ ì‹¤í–‰ë˜ì§€ë§Œ
                        // ë‹¤ë¥¸ ê³³ì— ì„¤ì •ëœ ë™ì¼ ì´ë²¤íŠ¸ê¸°ëŠ¥ì€ ì‹¤í–‰ì„ ë§‰ì•„ì¤€ë‹¤!

                        // ì´ë²¤íŠ¸ ì†ì„±ê°’ ì°ê¸°
                        showLog("ì—„ë§ˆì§‘");

                    }; ////////////////// click ///////////////

                    
                    ////////////////////////////////////////////////
                    // ì—„ë§ˆì§‘ ì¶”ê°€ ê¸°ëŠ¥ ë™ì¼ì´ë²¤íŠ¸ ë“±ë¡í•˜ê¸° /////////////
                    //////////////////////////////////////////////////
                    // -> ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì‚¬ìš©í•´ì•¼ ë™ì¼ìš”ì†Œ, ë™ì¼ì´ë²¤íŠ¸ ë“±ë¡ê°€ëŠ¥!
                    qs("p").addEventListener("click",(e) => {
                        // currentTarget ì´ë²¤íŠ¸ë¥¼ ë°›ê³  ìˆëŠ” ìš”ì†Œ ìì‹ 
                        event.currentTarget.style.border = "10px dotted red";

                        // ì´ë²¤íŠ¸ ì†ì„±ê°’ ì°ê¸°
                        showLog("ì—„ë§ˆì§‘");

                    }); ////////////////// click ///////////////


                     // ì•„ë“¤ ë°©(ë‚´ë°©) /////////////////////////////////
                    // qs("a").onclick = (e)=>{
                    
                    // : í•¨ìˆ˜í™” ì‹œí‚¤ê¸°
                    const sonFn = (e)=>{
                        event.currentTarget.style.backgroundColor = "red";
                        // : currentTarget = ì´ë²¤íŠ¸ë¥¼ ë¨¹ëŠ” ìì‹ 

                        // event.target.style.backgroundColor = "red";
                        // ğŸŒˆ[ targetìœ¼ë¡œ ë°°ê²½ìƒ‰ ë³€ê²½í•  ê²½ìš° ê²°ê³¼ëŠ”? ]
                        // -ë¶€ëª¨ìš”ì†Œì¤‘ ë²„ë¸”ë§ë§‰ê¸°ê°€ ëœ ìš”ì†Œì— ë°°ê²½ìƒ‰ ë³€ê²½ì´ targetìœ¼ë¡œ ë˜ì–´ ìˆë‹¤ë©´, ê·¸ê²ƒì´ ìµœì¢… ë³€ê²½ìƒ‰ìœ¼ë¡œ ë°˜ì˜ëœë‹¤!
                        // ì™œ?? -> targetì€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ "ìš”ì†Œ"ì´ë¯€ë¡œ!!

                        // aìš”ì†Œ ê¸°ë³¸ ì´ë™ê¸°ëŠ¥ ë§‰ê¸°
                        event.preventDefault();

                        // ì´ë²¤íŠ¸ ì†ì„±ê°’ ì°ê¸°
                        showLog("ì•„ë“¤ë°©");

                    }; //////////////////// click ë //////////////////


                    // addEventListener()ë¡œ ì´ë²¤íŠ¸ ë“±ë¡í•˜ê¸°
                    qs("a").addEventListener("click",sonFn);



                    // ì•„ë“¤ë°© í´ë¦­ì´ë²¤íŠ¸ ì§€ìš°ê¸° ë²„íŠ¼ í´ë¦­ì‹œ ì„¤ì • ////
                    qs(".clear").onclick = ()=>{
                        
                        // 1. ë°©ë²•1 : ì´ë²¤íŠ¸ ì†ì„±ê°’ ì§€ìš°ê¸° ë°©ë²•
                        // qs("a").onclick = "";

                        // 2. ë°©ë²•2 : ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ ë“±ë¡í•œ ê²½ìš°!
                        // -> removeEventListener() ë©”ì„œë“œë¡œ ì‚­ì œí•œë‹¤!
                        qs("a").removeEventListener("click",sonFn);

                        // ê¸°ì¡´ì˜ aìš”ì†Œ ë””ìì¸ ì´ˆê¸°í™”í•˜ê¸°
                        qs("a").setAttribute("style","");





                    }; ///////////////// click ///////////////





            }); //////////// ë¡œë“œêµ¬ì—­  ///////////////////////
            /////////////////////////////////////////////////

            /*************************************************
             
            â˜…â˜…â˜…â˜…â˜…â˜…â˜…[ DOM eventê°ì²´ ]â˜…â˜…â˜…â˜…â˜…â˜…â˜…

            -> ëª¨ë‘ ì½ê¸°(Read) ì†ì„± ë˜ëŠ” í˜¸ì¶œì‹¤í–‰ ë©”ì„œë“œì„

            1. DOM í‘œì¤€ì„ ì¤€ìˆ˜í•˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— 
              ì „ë‹¬ë˜ëŠ” ë§¤ê°œë³€ìˆ˜ëŠ” eventê°ì²´ ì˜¤ì§ í•˜ë‚˜ë‹¤!

            2. DOMë ˆë²¨(ë¶€ëª¨,ìì‹ê´€ê³„)ê³¼ ìƒê´€ì—†ì´ eventê°ì²´ê°€ ì „ë‹¬ë˜ë©° 
               eventê°ì²´ì—ëŠ” ìƒì„±ì— ê´€ì—¬í•œ ì´ë²¤íŠ¸ì™€ ê´€ë ¨ëœ í”„ë¡œí¼í‹° ë° 
               ë©”ì„œë“œê°€ í¬í•¨ëœë‹¤


            â˜…â˜…â˜…â˜…â˜…â˜…â˜…[ event ê°ì²´ : ì†ì„±ê³¼ ë©”ì„œë“œ ]â˜…â˜…â˜…â˜…â˜…â˜…â˜…

            1. ë¶ˆë¦°ê°’ ì†ì„±
            (1) bubbles (bool) : 
                ì´ë²¤íŠ¸ê°€ ë²„ë¸”ë§ë˜ëŠ”ì§€ ë‚˜íƒ€ëƒ„
            (2) cancelable (bool) : 
                ì´ë²¤íŠ¸ì˜ ê¸°ë³¸ ë™ì‘ ì·¨ì†Œê°€ëŠ¥ ì—¬ë¶€
            (3) defaultPrevented (bool) : 
                trueë©´ preventDefault()í˜¸ì¶œìƒíƒœ

            2. ìˆ«ìê°’ ì†ì„±
            (1) detail (integer) : 
                ì´ë²¤íŠ¸ì™€ ê´€ë ¨ëœ ì¶”ê°€ì •ë³´
            (2) eventPhase (integer) : 
                ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ í˜¸ì¶œëœ ë‹¨ê³„(1:ìº¡ì²˜ë§,2:íƒ€ê¹ƒ,3:ë²„ë¸”ë§)
                // ìº¡ì²˜ë§ì€ ì•„ë˜ì„œ ìœ„ë¡œ, ë²„ë¸”ë§ì€ ìœ„ì—ì„œ ì•„ë˜ë¡œ
            (3) isTrusted (bool) : 
                ë¸Œë¼ìš°ì €ì—ì„œ ìƒì„±í•œ ì´ë²¤íŠ¸ë¼ë©´ true -> ì¼ë°˜ì ìœ¼ë¡œ ì´ê²ƒ!
                ê°œë°œìê°€ ë§Œë“  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì´ë²¤íŠ¸ë¼ë©´ false

            3. ìš”ì†Œ ì†ì„±
            â˜…(1) currentTarget (element) : 
                í˜„ì¬ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬ì¤‘ì¸ element
            â˜…(2) target (element) : ì´ë²¤íŠ¸ íƒ€ê¹ƒ

            4. ì´ë²¤íŠ¸ ë©”ì„œë“œ
            â˜…(1) preventDefault() (Function) 
                ì´ë²¤íŠ¸ì˜ ê¸°ë³¸í–‰ë™ ì·¨ì†Œ, (cancelableê°€ trueì¼ë•Œ)
            â˜…(2) stopImmediatePropagation() (Function) : 
                ì´ë²¤íŠ¸ìº¡ì²˜ë§,ì´ë²¤íŠ¸ë²„ë¸”ë§ ëª¨ë‘ ì·¨ì†Œ. 
                ë‹¤ë¥¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í˜¸ì¶œì„ ë§‰ìŒ. (ê°™ì€ ì´ë²¤íŠ¸ë¡œ ì—¬ëŸ¬ê¸°ëŠ¥ì„¤ì •ì‹œ)
            â˜…(3) stopPropagation() (Function) 
                ì´ë²¤íŠ¸ìº¡ì²˜ë§,ì´ë²¤íŠ¸ë²„ë¸”ë§ ëª¨ë‘ ì·¨ì†Œ (bubblesê°€ trueì¼ë•Œ)

            5. ê¸°íƒ€ ì†ì„±
            (1) type (string) : 
                ë°œìƒí•œ ì´ë²¤íŠ¸ íƒ€ì…
            (2) view (AbstractView) : 
                ì´ë²¤íŠ¸ì™€ ì—°ê²°ëœ ì¶”ìƒí™”ëœ ë·°ë‹¤. 
                ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ windowê°ì²´ì™€ ì¼ì¹˜

            â˜…â˜…â˜…â˜…â˜…â˜…â˜…[ ì´ë²¤íŠ¸ íë¦„ ]â˜…â˜…â˜…â˜…â˜…â˜…â˜…

            1. ìº¡ì³ë‹¨ê³„ : ìµœìƒìœ„ ë¶€ëª¨ìš”ì†Œë¡œë¶€í„° ë§ë‹¨ìš”ì†Œê¹Œì§€ ë‚´ë ¤ê°

            2. target ë‹¨ê³„ : í˜„ì¬ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ìš”ì†Œ (event.targetìœ¼ë¡œ êµ¬í•¨)

            3. bubling ë‹¨ê³„ : target ì—ì„œ ë¶€í„° ìµœìƒìœ„ ë¶€ëª¨ê¹Œì§€ ì´ë²¤íŠ¸ê°€
                ì „ë‹¬ë˜ëŠ” í˜„ìƒ(ì£¼ì˜ì‚¬í•­: ê°™ì€ ì¢…ë¥˜ì˜ ì´ë²¤íŠ¸ê°€ ì „ë‹¬ëœë‹¤!)
                -> ëŠë‚Œ ì°¸ê³ : í† ë¥´ë§ì¹˜!
                https://mblogthumb-phinf.pstatic.net/20150915_245/qkdtoa9831_1442293878842KAb7K_GIF/glqkazhkd.gif?type=w2

            4. ì´ë²¤íŠ¸ ë²„ë¸”ë§ ì°¨ë‹¨:
            -> event ê°ì²´ ë©”ì„œë“œ ì‚¬ìš©í•˜ê¸°:
            - event.stopPropagation() ë©”ì„œë“œ ì‚¬ìš©
            - ì½”ë“œ ìœ„ì¹˜ëŠ” ì–´ë””ë‚˜ ì‚¬ìš©ê°€ëŠ¥
            - ë§Œì•½ ê°™ì€ ì´ë²¤íŠ¸ê°€ ë‹¤ë¥¸ ê¸°ëŠ¥ìœ¼ë¡œ ì—¬ëŸ¬ê°œ ì„¤ì •ëœ ê²½ìš°
            ë‹¤ë¥¸ ì„¤ì • ê¸°ëŠ¥ê¹Œì§€ ë§‰ìœ¼ë ¤ë©´?
            stopImmediatePropagation() ë©”ì„œë“œ ì‚¬ìš©!

            ->>> ì£¼ì˜: ì´ë²¤íŠ¸ ë²„ë¸”ë§ì€ ë§¤ìš° ìœ ìš©í•œ ê¸°ëŠ¥ì´ë‹¤!
            ë”°ë¼ì„œ ë§¤ìš° ëª…ë°±í•œ ìƒí™©ì´ ì•„ë‹ˆë¼ë©´ ë˜ë„ë¡ ì‚¬ìš©ë§ì!
            ì˜ˆì»¨ë° ì‚¬ìš©ì í–‰ë™ ë¶„ì„íˆ´ì—ì„œ í´ë¦­ë¹ˆë„ìˆ˜ë¥¼ ë¶„ì„í• ë•Œ
            ì‚¬ì´íŠ¸ì— ë²„ë¸”ë§ì°¨ë‹¨ëœ ì˜ì—­ì€ ì£½ì€ì˜ì—­(í´ë¦­ìˆ˜0)ìœ¼ë¡œ
            í‘œì‹œë˜ë¯€ë¡œ ë¶„ì„ì´ ë¶ˆê°€ëŠ¥í•˜ê²Œ ë˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆìŒ!

            â˜…â˜…â˜…â˜…â˜…â˜…â˜…[ ì´ë²¤íŠ¸ ì„¤ì • ë° í•´ì œ ]â˜…â˜…â˜…â˜…â˜…â˜…â˜…

            1. ì´ë²¤íŠ¸ ì„¤ì •
            (1) addEventListener(ì´ë²¤íŠ¸ëª…,í•¨ìˆ˜)
                -> ê°™ì€ìš”ì†Œì— ê°™ì€ ì´ë²¤íŠ¸ë¡œ ë‹¤ì¤‘ì„¤ì •ê°€ëŠ¥!
            (2) ì´ë²¤íŠ¸ì†ì„± = í•¨ìˆ˜
                -> ê°™ì€ìš”ì†Œì— ê°™ì€ ì´ë²¤íŠ¸ë¡œ ë‹¨ì¼ì„¤ì •ë§Œ ê°€ëŠ¥!

            2. ì´ë²¤íŠ¸ í•´ì œ
            (1) removeEventListener(ì´ë²¤íŠ¸ëª…,í•¨ìˆ˜)
            -> ì£¼ì˜: í•¨ìˆ˜ë¥¼ ì™¸ë¶€í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì•¼ í•´ì œê°€ ê°€ëŠ¥í•˜ë‹¤!
            (2) ì´ë²¤íŠ¸ì†ì„± = ""; -> ë¹ˆ ë¬¸ìì—´ê°’ì„ í• ë‹¹í•˜ì—¬ ì§€ì›€

            *************************************************************/
        </script>

        <style>
            body{
                font-size: 5vw;
                text-align: center;
                padding-top: 5vw;
            }
            body>*{
                box-sizing: border-box;
            }
            div {
                width: 60vw;
                background-color: #6e6e6e;
                padding: 5vw;
                margin: 5vw auto;
            }
            p {
                width: 40vw;
                background-color: #adadad;
                padding: 5vw;
            }
            a {
                display: block;
                width: 30vw;
                background-color: #ccc;
                padding: 5vw;
                border: #000 thin solid;
            }
        </style>
    </head>

    <body>
        ëŒ€í•œë¯¼êµ­ì „ì²´
        <div>
            ì¹œì²™ë„¤ì§‘
            <p>
                ì—„ë§ˆì§‘
                <a href="#">ë‚´ë°©</a>
            </p>
        </div>

        <!-- ì•„ë“¤ë°© í´ë¦­ì´ë²¤íŠ¸ ì§€ìš°ê¸°ë²„íŠ¼ -->
        <button class="clear" style="font-size: 5vw;">ì•„ë“¤ë°© ì´ë²¤íŠ¸ ì§€ì›Œ!</button>

    </body>
</html>